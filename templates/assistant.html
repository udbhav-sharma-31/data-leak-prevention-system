{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="card p-4 shadow-lg bg-black border-success">
    <h4 class="text-success">ðŸ¤– Security Assistant</h4>
    <div id="chat-box" class="border p-3 mb-3 bg-dark text-light" style="height: 400px; overflow-y: auto;"></div>

    <div class="input-group">
      <input id="user-input" type="text" class="form-control form-control-dark" placeholder="Ask anything...">
      <button class="btn btn-success" onclick="sendMessage()">Send</button>
    </div>
  </div>
</div>

<script>

function sendMessage(){
  let msg = document.getElementById("user-input").value;
  if(!msg.trim()) return;

  
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({message: msg})
  }
  .then(resp => resp.json())
  .then(data => {
    box.innerHTML += `<p><strong>Assistant:</strong> ${data.reply}</p>`;
    box.scrollTop = box.scrollHeight;
  });

</script>
{% endblock %}
